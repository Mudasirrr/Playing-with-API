<!DOCTYPE html>
<htmrll>
    <head>
        <meta charset="UTF-8">
        <meta name = "viewport" content="width=device-width,initial-scale=1.0">
        <title>Asyncronyous Programming</title>

    </head>
    <body>
        <input type="text"id="myin">
        <button id="mybtn">fetch it</button>
        <div id= 'infor'>
        </div>
        <!--<script>
            document.getElementById("mybtn").onclick =()=>{
                //Here we access the input
                let p = document.getElementById("myin").value;
                console.log(p);
                //the above is the api
                fetch(`http://api.openweathermap.org/data/2.5/weather?q=${p}&units=metric&APPID=e48fcda13a57e3fe1b70dcfc6b618d54`)
                .then(data =>{
                    return data.json();
                })
                 .then(data2=>{
                     /**
                     the above console is used for testing
                     */
                     console.log(data2 )
                     console.log(data2.sys.country )
                //     console.log(data2.main.temp )
                //     console.log(data2.weather[0].description ) 
                    
            document.getElementById('infor').innerHTML=`
                
            <ul>
                <li>City:${data2.name}</li>
                <li>Country
                :${data2.sys.country}</li>
                <li>temp:${data2.main.temp}</li>
                <li>description:${data2.weather[0].description}</li>
            </ul>
                `
                }) 
                       
            }
        </script> -->
        <!-- <script>

            document.getElementById("mybtn").onclick =async ()=>{
                //Here we access the input
                let p = document.getElementById("myin").value;
                console.log(p);
                //the above is the api
                var data = await fetch(`http://api.openweathermap.org/data/2.5/weather?q=${p}&units=metric&APPID=e48fcda13a57e3fe1b70dcfc6b618d54`)
                var data2 = await data.json();
                 console.log(data2); 
                     /**
                     the above console is used for testing
                     */
                     console.log(data2 )
                     console.log(data2.sys.country )
                //     console.log(data2.main.temp )
                //     console.log(data2.weather[0].description ) 
                    
            document.getElementById('infor').innerHTML=`
                
            <ul>
                <li>City:${data2.name}</li>
                <li>Country
                :${data2.sys.country}</li>
                <li>temp:${data2.main.temp}</li>
                <li>description:${data2.weather[0].description}</li>
            </ul>
                `
                        
            }
        </script> -->
        <script>
            /*
            * The above is simple function ,with async keyword it makes bcome promise function
            *we need the value that is 55, but when we call them it return poromise
            *its stupid some how...
            */
            async function getsum0(){
                return 55;
            }
            console.log("getsum0:"+getsum0());
            /////////////////////////////////
            
            console.log("using then...");
            async function getsum1(){
                return 55;
            }
            getsum1().then(data=>{
                console.log("getsum1:"+data);
            });
            /////////////////////////////////
            //Now Come to the Promise
            ////////////////////////////////
            
            console.log("uwsing new and Promise keyword...");
            async function getsum2(){
                return new Promise((res, rej)=>{
                     //res("oky good")
                     setTimeout(()=>{
                         res("Oky cool getsum2")
                     },3000)
                })
            }
            getsum2().then(data=>{
                console.log("getsum2:"+data);
            });
            ////////////////////////////////////////////////////////
            //Now Come to the Promise and Convert it into async await
            ////////////////////////////////////////////////////////
            
            console.log("using async, await keyword...");
            async function getsum3(){
                return new Promise((res, rej)=>{
                     //res("oky good")
                     setTimeout(()=>{
                         res("Oky amazing")
                     },3000)
                })
            }
                        
            async function display(){
                try {
                    
                var x = await getsum3(x);
                console.log("getsum3:"+x)
                }catch(err){
                    console.log(err)
                }
            }

            display()

            // getsum3().then(data=>{
            //     console.log(data);
            // });

        </script>
    </body>
</htmrll>